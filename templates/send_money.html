<!-- send_money.html -->
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Send Money â€” Apex Bank Management System</title>
	<meta name="description" content="Transfer funds securely with Apex Bank.">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/send_money.css') }}">
	<script src="{{ url_for('static', filename='js/send_money.js') }}" defer></script>
</head>
<body>
	<!-- Animated background (pure CSS; respects reduced motion) -->
	<div class="bg" aria-hidden="true">
		<span class="bubble b1"></span>
		<span class="bubble b2"></span>
		<span class="bubble b3"></span>
		<span class="bubble b4"></span>
		<span class="bubble b5"></span>
		<span class="bubble b6"></span>
	</div>

	<header class="site-header" role="banner">
		<nav class="nav" aria-label="Primary">
			<a class="brand" href="/" aria-label="Apex Bank home">
				<!-- Inline SVG placeholder logo -->
				<svg class="logo" width="28" height="28" viewBox="0 0 48 48" aria-hidden="true">
					<defs>
						<linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
							<stop offset="0%" stop-color="#7ec8e3"/>
							<stop offset="100%" stop-color="#9be3c7"/>
						</linearGradient>
					</defs>
					<circle cx="24" cy="24" r="20" fill="url(#g)"></circle>
					<path d="M12 28 L24 14 L36 28" fill="none" stroke="#0b3a4a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
					<path d="M17 28 V34 H31 V28" fill="none" stroke="#0b3a4a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
				<span class="brand-name">Apex Bank</span>
			</a>
			<div class="user-info">
				<span class="welcome">Welcome, <strong>{{ username }}</strong></span>
				<div class="nav-links">
					<a href="/dashboard" class="nav-link">Dashboard</a>
					<a href="/logout" class="logout-btn" aria-label="Logout">
						<svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
							<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							<polyline points="16,17 21,12 16,7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							<line x1="21" y1="12" x2="9" y2="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
						</svg>
						Logout
					</a>
				</div>
			</div>
		</nav>
	</header>

	<main class="main" role="main">
		<section class="send-money" aria-labelledby="send-money-title">
			<div class="container">
				<div class="page-header">
					<h1 id="send-money-title">Send Money</h1>
					<p class="lead">Transfer funds securely to another account</p>
				</div>

				<!-- Account Overview Card -->
				<div class="card account-overview" role="region" aria-label="Account overview">
					<div class="account-header">
						<h2>Your Account</h2>
						<div class="account-number">Account: {{ account_number }}</div>
					</div>
					<div class="balance-section">
						<div class="balance-label">Available Balance</div>
						<div class="balance-amount">${{ "%.2f"|format(balance) }}</div>
					</div>
				</div>

				<!-- Send Money Form -->
				<div class="card send-form" role="region" aria-label="Send money form">
					<h2>Transfer Details</h2>
					<form id="sendMoneyForm" class="form" method="POST" novalidate>
						<div class="form-group">
							<label for="recipientAccount" class="form-label">Recipient Account Number</label>
							<input 
								type="text" 
								id="recipientAccount" 
								name="recipient_account" 
								class="form-input" 
								placeholder="Enter account number (e.g., AC100001)"
								required 
								autocomplete="off"
								aria-describedby="recipientHelp"
							>
							<div id="recipientHelp" class="form-help">Enter the account number of the person you want to send money to</div>
							<div class="form-error" id="recipientError" role="alert" aria-live="polite"></div>
						</div>

						<div class="form-group">
							<label for="amount" class="form-label">Amount</label>
							<div class="input-group">
								<span class="input-prefix">$</span>
								<input 
									type="number" 
									id="amount" 
									name="amount" 
									class="form-input" 
									placeholder="0.00"
									step="0.01"
									min="0.01"
									max="{{ balance }}"
									required 
									autocomplete="off"
									aria-describedby="amountHelp"
								>
							</div>
							<div id="amountHelp" class="form-help">Enter the amount you want to transfer (minimum $0.01)</div>
							<div class="form-error" id="amountError" role="alert" aria-live="polite"></div>
						</div>

						<div class="form-group">
							<label for="description" class="form-label">Description (Optional)</label>
							<input 
								type="text" 
								id="description" 
								name="description" 
								class="form-input" 
								placeholder="What is this transfer for?"
								maxlength="100"
								autocomplete="off"
								aria-describedby="descriptionHelp"
							>
							<div id="descriptionHelp" class="form-help">Add a note to help identify this transaction</div>
						</div>

						<div class="form-actions">
							<button type="button" class="btn btn-secondary" id="cancelBtn">
								<svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
									<line x1="18" y1="6" x2="6" y2="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
									<line x1="6" y1="6" x2="18" y2="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
								</svg>
								Cancel
							</button>
							<button type="submit" class="btn btn-primary" id="sendBtn">
								<svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
									<path d="M22 2L11 13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<polygon points="22,2 15,22 11,13 2,9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								Send Money
							</button>
						</div>
					</form>
				</div>

				<!-- Recent Transfers -->
				<div class="card recent-transfers" role="region" aria-label="Recent transfers">
					<h2>Recent Transfers</h2>
					<div class="transfers-list">
						<div class="transfer-item">
							<div class="transfer-icon">
								<svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
									<circle cx="12" cy="12" r="3" fill="currentColor"/>
								</svg>
							</div>
							<div class="transfer-content">
								<div class="transfer-title">No recent transfers</div>
								<div class="transfer-desc">Your recent money transfers will appear here</div>
								<div class="transfer-time">-</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<footer class="site-footer" role="contentinfo">
		<small>&copy; <span id="year"></span> Apex Bank Management System.</small>
	</footer>

	<!-- Flash Messages -->
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
			<div class="flash-messages">
				{% for category, message in messages %}
					<div class="flash flash-{{ category }}" role="alert">
						<span>{{ message }}</span>
						<button class="flash-close" aria-label="Close message">&times;</button>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	{% endwith %}
</body>
</html>
