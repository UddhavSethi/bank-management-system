<!-- profile.html -->
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Profile â€” Apex Bank Management System</title>
	<meta name="description" content="Manage your profile and account settings with Apex Bank.">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
	<script src="{{ url_for('static', filename='js/profile.js') }}" defer></script>
</head>
<body>
	<!-- Animated background (pure CSS; respects reduced motion) -->
	<div class="bg" aria-hidden="true">
		<span class="bubble b1"></span>
		<span class="bubble b2"></span>
		<span class="bubble b3"></span>
		<span class="bubble b4"></span>
		<span class="bubble b5"></span>
		<span class="bubble b6"></span>
	</div>

	<header class="site-header" role="banner">
		<nav class="nav" aria-label="Primary">
			<a class="brand" href="/" aria-label="Apex Bank home">
				<!-- Inline SVG placeholder logo -->
				<svg class="logo" width="28" height="28" viewBox="0 0 48 48" aria-hidden="true">
					<defs>
						<linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
							<stop offset="0%" stop-color="#7ec8e3"/>
							<stop offset="100%" stop-color="#9be3c7"/>
						</linearGradient>
					</defs>
					<circle cx="24" cy="24" r="20" fill="url(#g)"></circle>
					<path d="M12 28 L24 14 L36 28" fill="none" stroke="#0b3a4a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
					<path d="M17 28 V34 H31 V28" fill="none" stroke="#0b3a4a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
				<span class="brand-name">Apex Bank</span>
			</a>
			<div class="user-info">
				<span class="welcome">Welcome, <strong>{{ username }}</strong></span>
				<div class="nav-links">
					<a href="/dashboard" class="nav-link">Dashboard</a>
					<a href="/send_money" class="nav-link">Send Money</a>
					<a href="/transaction_history" class="nav-link">History</a>
					<a href="/profile" class="nav-link active">Profile</a>
					<a href="/logout" class="logout-btn" aria-label="Logout">
						<svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
							<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							<polyline points="16,17 21,12 16,7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							<line x1="21" y1="12" x2="9" y2="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
						</svg>
						Logout
					</a>
				</div>
			</div>
		</nav>
	</header>

	<main class="main" role="main">
		<section class="profile" aria-labelledby="profile-title">
			<div class="container">
				<div class="page-header">
					<h1 id="profile-title">My Profile</h1>
					<p class="lead">Manage your personal information and account settings</p>
				</div>

				<!-- Profile Overview Card -->
				<div class="card profile-overview" role="region" aria-label="Profile overview">
					<div class="profile-header">
						<div class="profile-avatar">
							<svg width="64" height="64" viewBox="0 0 24 24" aria-hidden="true">
								<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<circle cx="12" cy="7" r="4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</div>
						<div class="profile-info">
							<h2>{{ username }}</h2>
							<p class="profile-account">Account: {{ account_number }}</p>
							<p class="profile-balance">Balance: ${{ "%.2f"|format(balance) }}</p>
						</div>
					</div>
					<div class="profile-stats">
						<div class="stat-item">
							<div class="stat-label">Member Since</div>
							<div class="stat-value">{{ created_at }}</div>
						</div>
						<div class="stat-item">
							<div class="stat-label">Account Status</div>
							<div class="stat-value active">Active</div>
						</div>
					</div>
				</div>

				<!-- Personal Information Section -->
				<div class="card personal-info" role="region" aria-label="Personal information">
					<div class="card-header">
						<h2>Personal Information</h2>
						<button class="btn btn-secondary" id="editInfoBtn">
							<svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
								<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							Edit Information
						</button>
					</div>
					<div class="card-content">
						<div class="info-grid">
							<div class="info-item">
								<label class="info-label">Username</label>
								<div class="info-value">{{ username }}</div>
							</div>
							<div class="info-item">
								<label class="info-label">Email Address</label>
								<div class="info-value" id="emailDisplay">
									{% if email %}
										{{ email }}
									{% else %}
										<span class="not-set">Not set</span>
									{% endif %}
								</div>
							</div>
							<div class="info-item">
								<label class="info-label">Phone Number</label>
								<div class="info-value" id="phoneDisplay">
									{% if phone %}
										{{ phone }}
									{% else %}
										<span class="not-set">Not set</span>
									{% endif %}
								</div>
							</div>
							<div class="info-item">
								<label class="info-label">Account Number</label>
								<div class="info-value">{{ account_number }}</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Edit Information Form -->
				<div class="card edit-form" id="editInfoForm" style="display: none;" role="region" aria-label="Edit information form">
					<div class="card-header">
						<h2>Update Personal Information</h2>
						<button class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
					</div>
					<div class="card-content">
						<form method="POST" id="updateInfoForm">
							<input type="hidden" name="action" value="update_info">
							<div class="form-group">
								<label for="email" class="form-label">Email Address</label>
								<input type="email" id="email" name="email" class="form-input" value="{{ email }}" placeholder="Enter your email address">
								<div class="form-help">We'll use this to send you important account updates</div>
							</div>
							<div class="form-group">
								<label for="phone" class="form-label">Phone Number</label>
								<input type="tel" id="phone" name="phone" class="form-input" value="{{ phone }}" placeholder="Enter your phone number">
								<div class="form-help">Include country code for international numbers</div>
							</div>
							<div class="form-actions">
								<button type="button" class="btn btn-secondary" id="cancelUpdateBtn">Cancel</button>
								<button type="submit" class="btn btn-primary">Update Information</button>
							</div>
						</form>
					</div>
				</div>

				<!-- Security Section -->
				<div class="card security" role="region" aria-label="Security settings">
					<div class="card-header">
						<h2>Security</h2>
						<button class="btn btn-secondary" id="changePasswordBtn">
							<svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
								<rect x="3" y="11" width="18" height="11" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<circle cx="12" cy="16" r="1" fill="currentColor"/>
								<path d="M7 11V7a5 5 0 0 1 10 0v4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							Change Password
						</button>
					</div>
					<div class="card-content">
						<div class="security-info">
							<div class="security-item">
								<svg class="security-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
									<rect x="3" y="11" width="18" height="11" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<circle cx="12" cy="16" r="1" fill="currentColor"/>
									<path d="M7 11V7a5 5 0 0 1 10 0v4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								<div class="security-details">
									<h3>Password</h3>
									<p>Last updated: Recently</p>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Change Password Form -->
				<div class="card password-form" id="changePasswordForm" style="display: none;" role="region" aria-label="Change password form">
					<div class="card-header">
						<h2>Change Password</h2>
						<button class="btn btn-secondary" id="cancelPasswordBtn">Cancel</button>
					</div>
					<div class="card-content">
						<form method="POST" id="updatePasswordForm">
							<input type="hidden" name="action" value="change_password">
							<div class="form-group">
								<label for="current_password" class="form-label">Current Password</label>
								<input type="password" id="current_password" name="current_password" class="form-input" placeholder="Enter your current password" required>
							</div>
							<div class="form-group">
								<label for="new_password" class="form-label">New Password</label>
								<input type="password" id="new_password" name="new_password" class="form-input" placeholder="Enter your new password" required>
								<div class="form-help">Password must be at least 6 characters long</div>
							</div>
							<div class="form-group">
								<label for="confirm_password" class="form-label">Confirm New Password</label>
								<input type="password" id="confirm_password" name="confirm_password" class="form-input" placeholder="Confirm your new password" required>
							</div>
							<div class="form-actions">
								<button type="button" class="btn btn-secondary" id="cancelPasswordUpdateBtn">Cancel</button>
								<button type="submit" class="btn btn-primary">Change Password</button>
							</div>
						</form>
					</div>
				</div>

				<!-- Account Actions -->
				<div class="card account-actions" role="region" aria-label="Account actions">
					<div class="card-header">
						<h2>Account Actions</h2>
					</div>
					<div class="card-content">
						<div class="action-grid">
							<a href="/dashboard" class="action-item">
								<svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
									<rect x="3" y="3" width="7" height="7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<rect x="14" y="3" width="7" height="7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<rect x="14" y="14" width="7" height="7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<rect x="3" y="14" width="7" height="7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								<div class="action-content">
									<h3>Dashboard</h3>
									<p>View your account overview</p>
								</div>
							</a>
							<a href="/send_money" class="action-item">
								<svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
									<path d="M17 9V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2m2 4h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2zm7-5a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								<div class="action-content">
									<h3>Send Money</h3>
									<p>Transfer funds to other accounts</p>
								</div>
							</a>
							<a href="/transaction_history" class="action-item">
								<svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
									<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<polyline points="14,2 14,8 20,8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
									<line x1="16" y1="13" x2="8" y2="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
									<line x1="16" y1="17" x2="8" y2="17" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
								</svg>
								<div class="action-content">
									<h3>Transaction History</h3>
									<p>View your transaction records</p>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<footer class="site-footer" role="contentinfo">
		<small>&copy; <span id="year"></span> Apex Bank Management System.</small>
	</footer>

	<!-- Flash Messages -->
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
			<div class="flash-messages">
				{% for category, message in messages %}
					<div class="flash flash-{{ category }}" role="alert">
						<span>{{ message }}</span>
						<button class="flash-close" aria-label="Close message">&times;</button>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	{% endwith %}
</body>
</html>
